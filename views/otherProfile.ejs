<%- include('partials/headerProfile') -%>

<!-- Top Section With user Info -->
<section class=" pt-5 pb-0 p-3 pt-sm-4 bg-black bg-opacity-75">
  <div class="container-md pt-4 ">

    <!-- DIV FOR PROFILE TOP -->
    <div class="row">

      <!-- User Info and Logout -->
      <div class="row justify-content-center mt-2 mt-sm-4 text-center text-light" id="topDiv">
        <h2 class="text-center m-1 mt-4 text-light" id="topH2">Welcome to <strong class="text-capitalize"><%= otherUser.userName %>'s</strong> profile! </h2>
        
        <p class="mt-1"><strong>Email</strong>: <%= otherUser.email %></p>
        <p class="mt-1"><strong>Member Since</strong>: <%= otherUser.signUpDate.toLocaleDateString() %>
        </p>
        
      </div>

      <!-- Your Profile/ Feed Buttons  -->
      <div class="d-flex justify-content-center mt-3 mb-0">
        
        <button class="btn btn-warning btn-lg "><a class="text-decoration-none text-black" href="/profile/<%= user._id %> ">Your Profile</a></button>

        <button class="btn btn-warning btn-lg ms-2"><a class="text-decoration-none text-black" href="/feed">Visit Feed</a></button>
      </div>                  
    </div>

  </div>
</section>

<!-- Section for Post data -->
<section class=" p-2 p-lg-1 bg-black bg-opacity-75">
  <div class="container-md  ">
    
    <!-- "Your Posts" Container -->
    <div class=" g-4 align-items-center mt-4">
      <!-- <h3 class="text-center mt-1 mb-0 text-light"><span class="text-capitalize"> <%= otherUser.userName %>'s' </span> Posts</h3> -->
      
      <!-- Conditional for counting posts -->
      <%if(posts.length > 0 ){ %>   
        <h4 class="text-center fst-italic mt-2 mb-0 text-light "> <span class="text-capitalize"> <%= otherUser.userName %> </span> has <%= posts.length %> posts </h4>
        <%} else { %> 
        <h4 class="text-center fst-italic mt-2 mb-0 text-light">You have <%= posts.length %> posts, share something! </h4>  
      <% } %>
    </div>
  </div>
</section>

<!-- Section for Posts and Cards -->
<section class=" p-3 p-sm-5 p-lg-5 bg-black bg-opacity-75">
  <div class="container-md ">
    <div class="row text-center g-4">

      <div class="col mt-1">
        
        <!-- CARDS FOR POSTS -->
        <% for(var i=0; i<posts.length; i++) {%>
          
          <div class="m-4 card-group ">
            
            <div class="card bg-dark text-light text-center border-warning rounded-4 border-3 bg-opacity-75 mb-md-5 mb-3">
    
              <!-- Card Header -->
              <div class="card-header  justify-content-between text-center align-items-center">
                <!-- Post Title -->
                <h2 class="card-title mt-1 mb-0 text-center" id="post-title"><%= posts[i].title %></h2>
                <!-- Date and Time  -->
                <span class="text-capitalize fst-italic mx-1 mt-3 fs-6 "> <%= posts[i].createdAt.toLocaleDateString()%>, <%= posts[i].createdAt.toLocaleTimeString()%></span>
              </div>
    
              <div class="card-body text-dark py-1 ">
                <!-- Post Image -->
                <a href="/post/<%= posts[i]._id%>" class="d-flex justify-content-center">
                  <img class="img-fluid" src="<%= posts[i].image%>">
                </a>
    
              </div>
    
              <!-- Card Footer -->
              <div class="card-footer">
                <!-- Container like & comment count, Delete -->
                <div class="d-flex justify-content-between align-items-center text-center mt-2"> 
    
                  <span class="col fa fa-heart  fs-5">&nbsp;<%= posts[i].likes%></span>
    
                  <span class="col fa fa-comment  fs-5">&nbsp; <%= posts[i].numOfComments%></span>
    
                  <!-- <form action="/post/deletePost/<%= posts[i].id %>?_method=DELETE" method="POST" class="d-inline "> 
                    <button class="btn btn-warning fa fa-trash" type="submit"></button>
                  </form> -->
                </div> 
              </div>
    
            </div>
          </div>
          <% } %>
      </div>
    </div>

  </div>

</section>

<!-- Bottom Section for Buttons -->
<section class="  p-3  p-lg-5">
  <div class="container-md  ">

    <!-- Return To Top and Feed Buttons -->
    <div class="row justify-content-center mt-1">
      <a class="btn btn-warning btn-lg w-25" href="#topH2">Back to Top</a>
    </div>

    <div class="row justify-content-center mt-3">
      <a class="btn btn-warning btn-lg w-25" href="/feed">Visit Feed</a>
    </div>
  </div>

</section>


<%- include('partials/footer') -%>